<?xml version="1.0" encoding="UTF-8"?>

<process-definition name="ParseRegistryProcess"
                    xmlns="http://jbpm.org/3/jpdl"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xsi:schemaLocation="http://jbpm.org/3/jpdl http://jbpm.org/xsd/jpdl-3.0.xsd">

    <swimlane name="worker">
        <assignment class="org.flexpay.common.process.JobManagerAssignmentHandler"/>
    </swimlane>


    <start-state name="start">
        <transition to="ParseFile"/>
    </start-state>

    <task-node name="ParseFile">
        <task swimlane="worker" blocking="yes">
        </task>
        <transition name="next" to="end"/>
        <transition name="error" to="end"/>
        <event type="node-enter">
            <action name="FileParserEvent" config-type="bean" 
                  class="org.springmodules.workflow.jbpm31.JbpmHandlerProxy">
                <targetBean>fileParserEvent</targetBean>
                <factoryKey>jbpmConfiguration</factoryKey>
               </action>
        </event>
    </task-node>


    <end-state name="end"/>

</process-definition>
