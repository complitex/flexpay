<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
	   xsi:schemaLocation="
		   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<bean id="spFileService"
		  class="org.flexpay.eirc.service.imp.SpFileServiceImpl">
		<property name="spFileDao" ref="spFileDao" />
		<property name="spFileDaoExt" ref="spFileDaoExt" />
	</bean>

	<bean id="spRegistryService"
		  class="org.flexpay.eirc.service.imp.SpRegistryServiceImpl">
		<property name="spRegistryDao" ref="spRegistryDao" />
		<property name="spRegistryDaoExt" ref="spRegistryDaoExt" />
		<property name="spRegistryRecordService" ref="spRegistryRecordService" />
	</bean>

	<bean id="spRegistryRecordService"
		  class="org.flexpay.eirc.service.imp.SpRegistryRecordServiceImpl">
		<property name="spRegistryRecordDao" ref="spRegistryRecordDao" />
		<property name="spRegistryRecordDaoExt" ref="spRegistryRecordDaoExt" />
		<property name="workflowManager" ref="registryRecordWorkflowManager" />
	</bean>

	<bean id="spRegistryTypeService"
		  class="org.flexpay.eirc.service.imp.SpRegistryTypeServiceImpl">
		<property name="spRegistryTypeDao" ref="spRegistryTypeDao" />
	</bean>

	<bean id="spService" class="org.flexpay.eirc.service.imp.SPServiceImpl"
			p:dataSourceDescriptionDao-ref="dataSourceDescriptionDao"
			p:serviceDaoExt-ref="serviceDaoExt"
			p:serviceProviderDao-ref="serviceProviderDao" />

	<bean id="registryWorkflowManager" class="org.flexpay.eirc.persistence.workflow.RegistryWorkflowManager">
		<property name="registryDao" ref="spRegistryDao" />
		<property name="statusService" ref="spRegistryStatusService" />
	</bean>

	<bean id="registryRecordWorkflowManager" class="org.flexpay.eirc.persistence.workflow.RegistryRecordWorkflowManager">
		<property name="errorDao" ref="importErrorDao" />
		<property name="recordDao" ref="spRegistryRecordDao" />
		<property name="statusService" ref="spRegistryRecordStatusService" />
		<property name="registryWorkflowManager" ref="registryWorkflowManager" />
	</bean>

	<bean id="spFileParser" class="org.flexpay.eirc.sp.SpFileParser">
		<property name="spRegistryService" ref="spRegistryService" />
		<property name="spRegistryRecordService" ref="spRegistryRecordService" />
		<property name="spRegistryTypeService" ref="spRegistryTypeService" />
		<property name="spRegistryArchiveStatusService" ref="spRegistryArchiveStatusService" />
		<property name="organisationService" ref="organisationService" />
		<property name="spService" ref="spService" />
		<property name="registryWorkflowManager" ref="registryWorkflowManager" />
		<property name="recordWorkflowManager" ref="registryRecordWorkflowManager" />
		<property name="serviceTypeService" ref="serviceTypeService" />
	</bean>

	<bean id="serviceOperationsFactory"
		  class="org.flexpay.eirc.persistence.exchange.ServiceOperationsFactory">
		<property name="spService" ref="spService" />
		<property name="spFileService" ref="spFileService" />
		<property name="accountRecordService" ref="accountRecordService" />
		<property name="organisationService" ref="organisationService" />
		<property name="reportPeriodService" ref="reportPeriodService" />
	</bean>

	<bean id="consumerService" class="org.flexpay.eirc.service.imp.ConsumerServiceImpl"
		p:consumerDaoExt-ref="consumerDaoExt" />

	<bean id="accountRecordService" class="org.flexpay.eirc.service.imp.AccountRecordServiceImpl">
		<property name="accountRecordDao" ref="accountRecordDao" />
	</bean>

	<bean id="organisationService" class="org.flexpay.eirc.service.imp.OrganisationServiceImpl">
		<property name="organisationDao" ref="organisationDao" />
		<property name="organisationDaoExt" ref="organisationDaoExt" />
	</bean>

	<bean id="serviceTypeService" class="org.flexpay.eirc.service.imp.ServiceTypeServiceImpl"
			p:serviceDaoExt-ref="serviceDaoExt"
			p:serviceTypeDao-ref="serviceTypeDao" />

	<bean id="reportPeriodService" class="org.flexpay.eirc.service.imp.ReportPeriodServiceImpl" />

	<bean id="serviceProviderFileProcessor"
		  class="org.flexpay.eirc.service.exchange.ServiceProviderFileProcessor">
		<property name="serviceOperationsFactory" ref="serviceOperationsFactory" />
		<property name="spFileService" ref="spFileService" />
		<property name="spRegistryService" ref="spRegistryService" />
		<property name="importService" ref="importServiceEirc" />
		<property name="rawConsumersDataSource" ref="consumersDataSource" />
		<property name="errorsSupport" ref="importErrorSupport" />
		<property name="recordWorkflowManager" ref="registryRecordWorkflowManager" />
		<property name="registryWorkflowManager" ref="registryWorkflowManager" />
	</bean>

	<bean id="serviceOrganisationService" class="org.flexpay.eirc.service.imp.ServiceOrganisationServiceImpl">
		<property name="serviceOrganisationDao" ref="serviceOrganisationDao" />
	</bean>

	<bean id="ticketServiceAmountService" class="org.flexpay.eirc.service.imp.TicketServiceAmountServiceImpl">
		<property name="ticketServiceAmountDao" ref="ticketServiceAmountDao" />
	</bean>

	<bean id="ticketService" class="org.flexpay.eirc.service.imp.TicketServiceImpl">
		<property name="ticketDao" ref="ticketDao" />
		<property name="serviceOrganisationService" ref="serviceOrganisationService" />
		<property name="accountRecordService" ref="accountRecordService" />
		<property name="ticketServiceAmountService" ref="ticketServiceAmountService" />
	</bean>

	<bean id="spRegistryStatusService" class="org.flexpay.eirc.service.imp.SpRegistryStatusServiceImpl">
		<property name="spRegistryStatusDao" ref="spRegistryStatusDao" />
	</bean>

	<bean id="spRegistryArchiveStatusService" class="org.flexpay.eirc.service.imp.SpRegistryArchiveStatusServiceImpl">
		<property name="spRegistryArchiveStatusDao" ref="spRegistryArchiveStatusDao" />
	</bean>

	<bean id="spRegistryRecordStatusService" class="org.flexpay.eirc.service.imp.SpRegistryRecordStatusServiceImpl">
		<property name="spRegistryRecordStatusDao" ref="spRegistryRecordStatusDao" />
	</bean>

</beans>
