<?xml version="1.0" encoding="UTF-8"?>

<process-definition name="testProcessDefinition2"
    xmlns="http://jbpm.org/3/jpdl"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jbpm.org/3/jpdl http://jbpm.org/xsd/jpdl-3.0.xsd">

  <swimlane name="worker">
    <assignment class="org.flexpay.common.process.JobManagerAssignmentHandler" />
  </swimlane>


  <start-state name="start">
    <transition to="MockJobFirst" />
  </start-state>

  <task-node name="MockJobFirst">
    <task swimlane="worker" blocking="yes">
    </task>
    <transition name="next" to="MockJobLast" />
    <transition name="error" to="end" />
  </task-node>

  <task-node name="MockJobLast">
    <task name="zz" swimlane="worker" blocking="yes" >
        <event type="task-end" >
            <action class="org.flexpay.common.process.TestEvent" name="TestEvent">
                <eventExecuted>EVENT EXECUTED</eventExecuted>
            </action>
          </event>
    </task>
    <transition name="next" to="end" />
    <transition name="error" to="end" />
      <event type="node-leave" >
          <action class="org.flexpay.common.process.TestEvent" name="TestEvent">
              <eventExecuted>EVENT EXECUTED</eventExecuted>
          </action>
      </event>
  </task-node>

  <end-state name="end" />

</process-definition>
