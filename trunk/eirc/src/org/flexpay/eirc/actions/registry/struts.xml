<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
		"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
		"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<package name="registry" namespace="/eirc" extends="common">

		<action name="registriesList" class="listRegistriesAction">
			<!-- No security interceptor for now -->
			<result type="tiles">eirc.registry.list</result>
		</action>

		<action name="registryView" class="showRegistryAction">
			<!-- No security interceptor for now -->
			<result name="success" type="tiles">eirc.registry.view</result>
			<result name="redirectError" type="redirect-action">registriesList</result>
		</action>

		<action name="selectCorrectionType" class="selectCorrectionTypeAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_SET_CORRESPONDENCE</param>
			</interceptor-ref>
			<result name="input" type="tiles">eirc.select_correction_type</result>
			<result name="error" type="tiles">eirc.correction_type_error</result>
			<result name="apartment" type="redirect-action">
				<param name="actionName">registryRecordCorrectAddress</param>
				<param name="parse">true</param>
				<param name="record.id">${record.id}</param>
			</result>
			<result name="building" type="redirect-action">
				<param name="actionName">registryRecordCorrectAddressBuilding</param>
				<param name="parse">true</param>
				<param name="record.id">${record.id}</param>
			</result>
			<result name="street" type="redirect-action">
				<param name="actionName">registryRecordCorrectAddressStreet</param>
				<param name="parse">true</param>
				<param name="record.id">${record.id}</param>
			</result>
			<result name="person" type="redirect-action">
				<param name="actionName">registryRecordCorrectPerson</param>
				<param name="parse">true</param>
				<param name="record.id">${record.id}</param>
			</result>
		</action>

		<action name="registryRecordCorrectAddress" class="correctRecordAddressAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_SET_CORRESPONDENCE</param>
			</interceptor-ref>
			<result type="tiles">eirc.registry.record.correct_address</result>
			<result name="complete" type="tiles">eirc.registry.record.correct_address_complete</result>
		</action>

		<action name="registryRecordCorrectAddressStreet" class="correctStreetAddressAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_SET_CORRESPONDENCE</param>
			</interceptor-ref>
			<result type="tiles">eirc.registry.record.correct_address_street</result>
			<result name="complete" type="tiles">eirc.registry.record.correct_address_complete</result>
		</action>

		<action name="registryRecordCorrectAddressBuilding" class="correctBuildingAddressAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_SET_CORRESPONDENCE</param>
			</interceptor-ref>
			<result type="tiles">eirc.registry.record.correct_address_building</result>
			<result name="complete" type="tiles">eirc.registry.record.correct_address_complete</result>
		</action>

		<action name="registryRecordCorrectPerson" class="correctPersonAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_SET_CORRESPONDENCE</param>
			</interceptor-ref>
			<result type="tiles">eirc.registry.record.correct_person</result>
			<result name="complete" type="tiles">eirc.registry.record.correct_person_complete</result>
		</action>

		<action name="processRegistries" class="processRegistriesAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_PROCESS</param>
			</interceptor-ref>
			<result name="redirectSuccess" type="redirect-action">registriesList</result>
		</action>

		<action name="processRegistryRecords" class="processRegistryRecordsAction">
			<interceptor-ref name="commonDefaultStack">
				<param name="flexpayRoles.allowedRoles">EIRC_REGISTRY_PROCESS</param>
			</interceptor-ref>
			<result name="redirectSuccess" type="redirect-action">
				<param name="actionName">registryView</param>
				<param name="parse">true</param>
				<param name="registry.id">${registry.id}</param>
			</result>
			<result name="redirectError" type="redirect-action">registriesList</result>
		</action>

	</package>

</struts>
