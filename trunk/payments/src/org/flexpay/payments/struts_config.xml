<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
		"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
		"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<constant name="struts.custom.i18n.resources"
			  value="
			  	org/flexpay/common/i18n/common-messages,
			  	org/flexpay/ab/i18n/errors,org/flexpay/ab/i18n/messages,
			  	org/flexpay/orgs/i18n/errors,org/flexpay/orgs/i18n/messages,
			  	org/flexpay/payments/i18n/errors,org/flexpay/payments/i18n/messages" />

	<package name="payments_security" namespace="/payments" extends="common">

		<action name="getIdentityCookies" class="staticPageAction">
			<result type="tiles">payments.security.get_identity_cookie</result>
		</action>
		
	</package>

	<package name="payments" namespace="/payments" extends="common">

		<interceptors>
			<interceptor name="paymentPointIdentification"
						 class="org.flexpay.payments.actions.interceptor.PaymentPointIdentificationInterceptor"/>

			<interceptor-stack name="paymentsDefaultStack">
				<interceptor-ref name="commonDefaultStack"/>
				<interceptor-ref name="cookie">
					<param name="cookiesName">paymentPointId,organizationId</param>
					<param name="cookiesValue"></param>
				</interceptor-ref>
				<interceptor-ref name="paymentPointIdentification"/>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="paymentsDefaultStack"/>

		<global-results>
			<result name="pointAuthenticationRequired" type="tiles">payments.error.point_authentication_required</result>
		</global-results>

		<action name="main" class="paymentsStaticPageAction">
			<result type="tiles">payments.quittance.search.address</result>
		</action>

        <action name="emptyPage" class="paymentsStaticPageAction">
            <result type="tiles">payments.main</result>
        </action>

        <action name="mainByAddressOperations" class="paymentsStaticPageAction">
            <result type="tiles">payments.main.by_address.operations</result>
        </action>

        <action name="mainByAddressReports" class="paymentsStaticPageAction">
            <result type="tiles">payments.main.by_address.reports</result>
        </action>

        <action name="mainByEircaccountOperations" class="paymentsStaticPageAction">
            <result type="tiles">payments.main.by_eircaccount.operations</result>
        </action>

        <action name="mainByEircaccountReports" class="paymentsStaticPageAction">
            <result type="tiles">payments.main.by_eircaccount.reports</result>
        </action>

        <action name="mainByQuittanceOperations" class="paymentsStaticPageAction">
            <result type="tiles">payments.main.by_quittance.operations</result>
        </action>

        <action name="mainByQuittanceReports" class="paymentsStaticPageAction">
            <result type="tiles">payments.main.by_quittance.reports</result>
        </action>
	</package>

	<package name="ajax" namespace="dicts" extends="common">

		<action name="streetSearchAjax" class="streetSearchAjaxAction">
			<result>/WEB-INF/jsp/ab/filters/streets_search_response.jsp</result>
		</action>

	</package>


	<include file="org/flexpay/payments/actions/operations/struts.xml" />
	<include file="org/flexpay/payments/actions/registry/struts.xml" />
	<include file="org/flexpay/payments/actions/reports/struts.xml" />
	<include file="org/flexpay/payments/actions/quittance/struts.xml" />

</struts>
