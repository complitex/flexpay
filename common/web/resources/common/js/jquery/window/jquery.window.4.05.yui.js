$.window=function(a){return $.Window.getInstance(null,a)};$.fn.window=function(a){return $.Window.getInstance($(this),a)};$.Window=(function(){var p="4.05";var c=16;var k=4;var e=c+k;var n=0.7;var m=navigator.userAgent.toLowerCase();var u=400;var i=0;var t=null;var f=[];var s=[];function l(w){if(t!=null){t.unselect()}if(typeof w=="object"){t=w}else{if(typeof w=="string"){t=$("#"+w).get(0).windowInstance}}t.select()}function d(y){for(var w=0;w<f.length;w++){var x=f[w];if(x.getWindowId()==windowId){return x}}}function j(w){if(typeof w=="object"){f.push(w)}else{if(typeof w=="string"){f($("#"+w).get(0).windowInstance)}}}function q(w){for(var x=0;x<f.length;x++){var y=f[x];if(y.getWindowId()==w){f.splice(x--,1);break}}}function a(w){s.push($("#"+w).get(0).windowInstance)}function g(x){var A=false;for(var y=0;y<s.length;y++){var z=s[y];if(z.getWindowId()==x){s.splice(y--,1);A=true;continue}if(A){var w=z.getContainer().position();var B=y*120;z.getContainer().animate({top:B},u);z.getTargetCssStyle().top=B}}}function h(){if(m.indexOf("msie 7")>=0){$("body").attr("scroll","no")}else{document.body.style.overflow="hidden"}}function b(){if(m.indexOf("msie 7")>=0){$("body").removeAttr("scroll")}else{document.body.style.overflow="auto"}}function r(){var x=document.documentElement.clientWidth;var w=document.documentElement.clientHeight;return{width:x,height:w}}function v(){var x=0,w=0;if(typeof(window.pageYOffset)=="number"){w=window.pageYOffset;x=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){w=document.body.scrollTop;x=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){w=document.documentElement.scrollTop;x=document.documentElement.scrollLeft}}}return{left:x,top:w}}function o(G,T){var P=null;var au="window_"+(i++);var ae=true;var M=false;var af=false;var aa=false;var Z=new Object();var y=new Object();var ad=new Object();var w=new Object();var ar={};var z=0;var ac=null;var A=null;var x=null;var K=null;var T=$.extend({title:"",url:"",content:"",footerContent:"",containerClass:"",headerClass:"",frameClass:"",footerClass:"",x:-1,y:-1,z:2000,width:400,height:300,minWidth:200,minHeight:150,maxWidth:800,maxHeight:600,showFooter:true,showRoundCorner:false,closable:true,minimizable:true,maximizable:true,bookmarkable:true,draggable:true,resizable:true,scrollable:true,checkBoundary:false,custBtns:null,onOpen:null,onShow:null,onClose:null,onIframeStart:null,onIframeEnd:null,iframeRedirectCheckMsg:null,createRandomOffset:{x:200,y:150},showLog:false},T);function B(aG){P=aG;var aH=G!=null?G:$("body");var ay=T.showRoundCorner?"ui-corner-all ":"";aH.append("<div id='"+au+"' class='window_panel "+ay+T.containerClass+"'></div>");ac=aH.children("div#"+au);if($.isFunction(T.onOpen)){T.onOpen(P)}y.w=T.width;y.h=T.height;ac.width(T.width);ac.height(T.height);ac.css("position",ae?"absolute":"fixed");ac.css("z-index",T.z);if(T.x>=0||T.y>=0){if(T.x>=0){var aE=0;if(G!=null){aE=T.x+G.offset().left}else{aE=T.x+jQuery(window).scrollLeft()}ac.css("left",aE)}else{S()}if(T.y>=0){var aC=0;if(G!=null){aC=T.y+G.offset().top}else{aC=T.y+jQuery(window).scrollTop()}ac.css("top",aC)}else{H()}}else{O()}var aD=ac.position();ac.css({left:aD.left,top:aD.top});ay=T.showRoundCorner?"ui-corner-top ":"";var ax="<div class='window_header window_header_normal ui-widget-header "+ay+"no-resizable "+T.headerClass+"'><div class='window_title_text'>"+T.title+"</div><div class='window_function_bar'></div></div>";ac.append(ax);A=ac.children("div.window_header");if(T.maximizable){A.dblclick(function(){if(af){R()}else{ah()}})}var aF=A.children("div.window_function_bar");if(T.closable){aF.append("<div title='close window' class='closeImg window_icon_button no-draggable'></div>");aF.children(".closeImg").click(function(){am()});z+=e}if(T.maximizable){aF.append("<div title='maximize window' class='maximizeImg window_icon_button no-draggable'></div>");aF.append("<div title='cascade window' class='cascadeImg window_icon_button no-draggable' style='display:none;'></div>");aF.children(".maximizeImg").click(function(){ah()});aF.children(".cascadeImg").click(function(){R()});z+=e}if(T.minimizable){aF.append("<div title='minimize window' class='minimizeImg window_icon_button no-draggable'></div>");aF.children(".minimizeImg").click(function(){V()});z+=e}if(T.bookmarkable&&T.url!=null&&$.trim(T.url)!=""){aF.append("<div title='bookmark this' class='bookmarkImg window_icon_button no-draggable'></div>");aF.children(".bookmarkImg").click(function(){ai(T.title,T.url)});z+=e}F(aF);$(".window_icon_button").dblclick(function(){return false});al();aF.width(z);var aB=N(y.h);if(T.url!=null&&$.trim(T.url)!=""){if($.isFunction(T.onIframeStart)){E("start connecting iframe: "+T.url);T.onIframeStart(P,T.url)}if(T.iframeRedirectCheckMsg){aa=true;window.onbeforeunload=function(){if(aa){var aI=T.iframeRedirectCheckMsg.replace("{url}",T.url);return aI}}}ac.append("<div class='frame_loading'>Loading...</div>");var aA=ac.children(".frame_loading");aA.css("marginLeft","-"+(aA.outerWidth()/2)-20+"px");aA.click(function(){aA.remove()});var az=T.scrollable?"yes":"no";ac.append("<iframe style='display:none;' class='window_frame ui-widget-content no-draggable no-resizable "+T.frameClass+"' scrolling='"+az+"' src='"+T.url+"' width='100%' height='"+aB+"px' frameborder='0'></iframe>");x=ac.children(".window_frame");x.ready(function(){x.show()});x.load(function(){aa=false;aA.remove();E("load iframe finished: "+T.url);if($.isFunction(T.onIframeEnd)){T.onIframeEnd(P,T.url)}})}else{ac.append("<div class='window_frame ui-widget-content no-draggable no-resizable "+T.frameClass+"' style='width:100%; height:"+aB+"px;'></div>");x=ac.children(".window_frame");if(T.content!=null){C(T.content);x.children().show()}x.css({overflow:T.scrollable?"auto":"hidden"})}if(T.showFooter){ay=T.showRoundCorner?"ui-corner-bottom ":"";ac.append("<div class='window_footer ui-widget-content "+ay+"no-draggable "+T.footerClass+"'><div></div></div>");K=ac.children("div.window_footer");if(T.footerContent!=null){Q(T.footerContent);K.children("div").children().show()}}else{ay=T.showRoundCorner?"ui-corner-bottom ":"";x.addClass(ay)}ac.mousedown(function(){l(au)});if(T.draggable){ac.draggable({cancel:".no-draggable",start:function(){E("drag start");if(M||af){ac.css("position","fixed");ac.css(ar)}J();at()},stop:function(){E("drag stop");if(M||af){ac.css("position","fixed");ac.css(ar)}W();Y()}});if(T.checkBoundary){ac.draggable("option","containment","parent")}}if(T.resizable){ac.resizable({cancel:".no-resizable",alsoResize:x,start:function(){E("resize start");if(M||af){ac.css("position","fixed");ac.css(ar)}J();at()},stop:function(){E("resize stop");if(M||af){ac.css("position","fixed");ac.css(ar)}W();al();Y()}});if(T.checkBoundary){}if(T.maxWidth>=0){ac.resizable("option","maxWidth",T.maxWidth)}if(T.maxHeight>=0){ac.resizable("option","maxHeight",T.maxHeight)}if(T.minWidth>=0){ac.resizable("option","minWidth",T.minWidth)}if(T.minHeight>=0){ac.resizable("option","minHeight",T.minHeight)}}$(window).resize(function(){if(af){if(M){var aI=r();w.w=aI.width;w.h=aI.height}else{ah(true,true)}}});if($.isFunction(T.onShow)){T.onShow(P)}}function E(ax){if(T!=null&&T.showLog&&window.console!=null){console.log(ax)}}function U(ax){T.title=ax;A.children(".window_title_text").text(ax);if(M){X()}}function D(ax){T.url=ax;x.attr("src",ax)}function C(ax){T.content=ax;if(typeof ax=="object"){ax=$(ax).clone(true)}else{if(typeof ax=="string"){}}x.empty();x.append(ax)}function Q(ax){if(T.showFooter){T.footerContent=ax;if(typeof ax=="object"){ax=$(ax).clone(true)}else{if(typeof ax=="string"){}}K.children("div").empty();K.children("div").append(ax)}}function J(){var ax=$("#window_overlay");if(ax.get(0)==null){$("body").append("<div id='window_overlay'>&nbsp;</div>");ax=$("#window_overlay");ax.css({zIndex:T.z+1})}ax.show()}function W(){$("#window_overlay").hide()}function L(){var ax=ac.offset();var ay=v();ac.css({position:"fixed",left:ax.left-ay.left,top:ax.top-ay.top,marginLeft:0,marginTop:0})}function ab(){var ax=ac.offset();ac.css({position:"absolute",left:ax.left,top:ax.top})}function F(aF){if(T.custBtns!=null&&typeof T.custBtns=="object"){for(var aC=0;aC<T.custBtns.length;aC++){var ay=T.custBtns[aC];if(ay!=null&&typeof ay=="object"){if(ay.id!=null&&ay.image!=null&&ay.callback!=null){var az=ay.id!=null?ay.id:"";var aD=ay.clazz!=null?ay.clazz:"";var aE=ay.title!=null?ay.title:"";var ax=ay.style!=null?ay.style:"";var aB=ay.image!=null?ay.image:"";var aG=ay.callback!=null?ay.callback:"";aF.append("<img id='"+az+"' src='"+aB+"' title='"+aE+"' class='"+aD+" window_icon_button no-draggable' style='"+ax+"'/>");var aA=aF.children("img[id="+az+"]");aA.get(0).clickCb=aG;if($.isFunction(aG)){aA.click(function(){this.clickCb($(this),P)})}}else{var aA=$(ay).clone(true);aA.addClass("window_icon_button no-draggable cust_button");aF.append(aA);aA.show()}}z+=e}}}function al(){A.children("div.window_title_text").width(A.width()-z-10)}function av(){var az=ac.width();var ax=ac.height();var ay=N(ax);x.width(az);x.height(ay)}function ai(ay,ax){if($.browser.mozilla&&window.sidebar){window.sidebar.addPanel(ay,ax,"")}else{if($.browser.msie&&window.external){window.external.AddFavorite(ax,ay)}else{if(m.indexOf("chrome")>=0){alert("Sorry! Chrome doesn't support bookmark function currently.")}else{if($.browser.safari||m.indexOf("safari")>=0){alert("Sorry! Safari doesn't support bookmark function currently.")}else{if($.browser.opera||m.indexOf("opera")>=0){alert("Sorry! Opera doesn't support bookmark function currently.")}}}}}}function at(){var ax=x.css("backgroundColor");if(ax!=null&&ax!="transparent"){ac.css("backgroundColor",ax)}x.hide();if(T.showFooter){K.hide()}ac.css("opacity",n)}function Y(){x.show();if(T.showFooter){K.show()}ac.css("opacity",1)}function N(ay){var ax=T.showFooter?16:0;return ay-20-ax-4}function X(){var ax=A.children("div.window_title_text");var aB=ax.text();var ay="";var aA=120-7-13;for(var az=0;az<aB.length;az++){var aC=aB.charAt(az);if(aC=="-"||aC=="_"){aC="|"}if(aC==" "){aC="<div style='height:5px; line-height:5px;'>&nbsp;</div>";ay+=aC}else{ay+=aC+"<br>"}ax.html(ay);if(ax.outerHeight()+13>aA){ay+=":";ax.html(ay);break}}}function aq(){var ax=A.children("div.window_title_text");ax.text(T.title)}function ap(){ac.css("z-index",T.z+2)}function I(){ac.css("z-index",T.z)}function aj(){return ac}function ag(){return A}function aw(){return x}function an(){return K}function ak(){return ar}function O(){if(G!=null){var ax=(G.width()-ac.width())/2+G.offset().left;var aA=(G.height()-ac.height())/2+G.offset().top;if(T.createRandomOffset.x>0){ax+=((Math.random()-0.5)*T.createRandomOffset.x)}if(T.createRandomOffset.y>0){aA+=((Math.random()-0.5)*T.createRandomOffset.y)}ac.css({left:ax,top:aA})}else{ac.css({left:"50%",top:"50%"}).css({marginLeft:"-"+(ac.outerWidth()/2)+"px",marginTop:"-"+(ac.outerHeight()/2)+"px"});if(ae){var az=parseInt(ac.css("marginLeft"),10)+jQuery(window).scrollLeft();var ay=parseInt(ac.css("marginTop"),10)+jQuery(window).scrollTop();if(T.createRandomOffset.x>0){az+=((Math.random()-0.5)*T.createRandomOffset.x)}if(T.createRandomOffset.y>0){ay+=((Math.random()-0.5)*T.createRandomOffset.y)}ac.css({marginLeft:az,marginTop:ay})}}}function S(){if(G!=null){var ax=(G.width()-ac.width())/2+G.offset().left;ac.css({left:ax})}else{ac.css({left:"50%"}).css({marginLeft:"-"+(ac.outerWidth()/2)+"px"});if(ae){ac.css({marginLeft:parseInt(ac.css("marginLeft"),10)+jQuery(window).scrollLeft()})}}}function H(){if(G!=null){var ax=(G.height()-ac.height())/2+G.offset().top;ac.css({top:ax})}else{ac.css({top:"50%"}).css({marginTop:"-"+(ac.outerHeight()/2)+"px"});if(ae){ac.css({marginTop:parseInt(ac.css("marginTop"),10)+jQuery(window).scrollTop()})}}}function ah(ay,aA){if(!$.browser.msie){h()}af=true;ac.draggable("disable");ac.resizable("disable");if(aA!=true){Z.left=ac.css("left");Z.top=ac.css("top");Z.marginLeft=ac.css("marginLeft");Z.marginTop=ac.css("marginTop");y.w=ac.width();y.h=ac.height()}var aB=v();var ax=r();ar={left:0,top:0,marginLeft:aB.left,marginTop:aB.top,width:ax.width,height:ax.height,opacity:1};if(ay){ac.css(ar);al();av();A.removeClass("window_header_normal");A.addClass("window_header_maximize");var az=A.children("div.window_function_bar");az.children(".maximizeImg").hide();az.children(".cascadeImg").show()}else{at();ac.animate(ar,u,"swing",function(){if($.browser.msie){h()}Y();al();av();A.removeClass("window_header_normal");A.addClass("window_header_maximize");var aC=A.children("div.window_function_bar");aC.children(".maximizeImg").hide();aC.children(".cascadeImg").show()})}}function V(){b();M=true;ac.draggable("disable");ac.resizable("disable");ad.left=ac.css("left");ad.top=ac.css("top");ad.marginLeft=ac.css("marginLeft");ad.marginTop=ac.css("marginTop");w.w=ac.width();w.h=ac.height();var ax=(s.length*120)+"px";ar={left:0,top:ax,marginLeft:0,marginTop:0,width:24,height:120,opacity:n};L();at();ac.animate(ar,u,"swing",function(){A.children("div.window_title_text").width("100%");A.attr("title",T.title);A.removeClass("window_header_normal");A.removeClass("window_header_maximize");A.addClass("window_header_minimize");if(T.showRoundCorner){A.removeClass("ui-corner-top");A.addClass("ui-corner-all")}A.children(".window_function_bar").hide();X();A.click(function(){R()})});ac.mouseover(function(){$(this).css("opacity",1)});ac.mouseout(function(){$(this).css("opacity",n)});a(au)}function R(){var ay=null;var ax=null;if(M){M=false;ay=ad;ax=w;ab();A.removeClass("window_header_minimize");if(af){var az=v();ay={left:0,top:0,marginLeft:az.left,marginTop:az.top};A.addClass("window_header_maximize")}else{A.addClass("window_header_normal")}}else{if(af){af=false;ay=Z;ax=y;A.removeClass("window_header_maximize");A.addClass("window_header_normal")}}aq();A.removeAttr("title");A.removeClass("window_header_minimize");if(T.showRoundCorner){A.removeClass("ui-corner-all");A.addClass("ui-corner-top")}A.children(".window_function_bar").show();ac.unbind("mouseover");ac.unbind("mouseout");ar={left:ay.left,top:ay.top,marginLeft:ay.marginLeft,marginTop:ay.marginTop,width:ax.w,height:ax.h,opacity:1};at();ac.animate(ar,u,"swing",function(){Y();A.unbind("click");al();av();var aA=A.children("div.window_function_bar");if(af){h();aA.children(".maximizeImg").hide();aA.children(".cascadeImg").show()}else{b();ac.draggable("enable");ac.resizable("enable");aA.children(".maximizeImg").show();aA.children(".cascadeImg").hide()}});g(au)}function am(ax){if(!ax&&$.isFunction(T.onClose)){T.onClose(P)}ao()}function ao(){aa=false;if(af){b()}q(au);ac.remove()}return{initialize:B,getTargetCssStyle:ak,getWindowId:function(){return au},select:ap,unselect:I,getContainer:aj,getHeader:ag,getFrame:aw,getFooter:an,alignCenter:O,alignHorizontalCenter:S,alignVerticalCenter:H,maximize:ah,minimize:V,restore:R,close:am,setTitle:U,setUrl:D,setContent:C,setFooterContent:Q}}return{getInstance:function(y,x){var w=o(y,x);w.initialize(w);l(w);w.getContainer().get(0).windowInstance=w;j(w);return w},getVersion:function(){return p},setAnimationSpeed:function(w){u=w},closeAll:function(w){var z=f.length;for(var x=0;x<z;x++){var y=f[0];y.close(w)}f=[];s=[]},hideAll:function(){for(var w=0;w<f.length;w++){f[w].getContainer().hide()}},showAll:function(){for(var w=0;w<f.length;w++){f[w].getContainer().show()}}}})();$.window.getVersion=$.Window.getVersion;$.window.setAnimationSpeed=$.Window.setAnimationSpeed;$.window.closeAll=$.Window.closeAll;$.window.hideAll=$.Window.hideAll;$.window.showAll=$.Window.showAll;